name: haadna_mutating_webhook_tests
on:
  push:
    paths:
      - .github/workflows/hasadna_mutating_webhook_tests.yaml
      - hasadna-mutating-webhook/**
jobs:
  tests:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-go@v5
      with:
        go-version-file: hasadna-mutating-webhook/go.mod
    - run: |
        cd hasadna-mutating-webhook
        go fmt
        git diff --exit-code
        go vet
        go test
